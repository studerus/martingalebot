% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_macd_filter.R
\name{add_macd_filter}
\alias{add_macd_filter}
\title{Add a flexible MACD-based signal filter to a data.table}
\usage{
add_macd_filter(
  dt,
  time_period = "1 hour",
  nFast = 12,
  nSlow = 26,
  nSig = 9,
  column_name = "deal_start",
  macd_is_above_signal = TRUE
)
}
\arguments{
\item{dt}{A \code{data.table} containing 'time' and 'price' columns, sorted by time.}

\item{time_period}{The time frame for resampling, e.g., "1 hour", "15 minutes".}

\item{nFast}{The number of periods for the fast moving average.}

\item{nSlow}{The number of periods for the slow moving average.}

\item{nSig}{The number of periods for the signal line moving average.}

\item{column_name}{The name of the logical column to be created. Defaults to \code{"deal_start"}.}

\item{macd_is_above_signal}{If \code{TRUE} (default), the signal is \code{TRUE} on a bullish
crossover (macd > signal). If \code{FALSE}, it's \code{TRUE} on a bearish crossover (macd < signal).}
}
\value{
The \code{data.table} \code{dt} is returned after being modified in place,
allowing for use in a \code{magrittr} pipeline.
}
\description{
This function calculates the Moving Average Convergence Divergence (MACD) on a
resampled time series and creates a logical signal column. It can be configured
to signal a bullish crossover (MACD line crosses above its signal line) or a
bearish crossover (MACD line crosses below its signal line).

The function modifies the input \code{data.table} by reference for maximum memory
efficiency.
}
\examples{
\dontrun{
# --- Example 1: Standard Bullish Crossover for Deal Start ---
dat <- get_binance_prices_from_csv(
  'PYRUSDT',
  start_time = '2023-02-01',
  end_time = '2023-02-28',
  progressbar = FALSE
) |>
  add_macd_filter(time_period = "1 hour", macd_is_above_signal = TRUE)

# --- Example 2: Bearish Crossover for Emergency Stop ---
data_with_stop <- dat |>
  add_macd_filter(
    time_period = "4 hour",
    column_name = "emergency_stop",
    macd_is_above_signal = FALSE
  )
tail(data_with_stop)
}
}
\seealso{
\code{\link{add_rsi_filter}}, \code{\link{add_sma_filter}}, \code{\link{add_bollinger_filter}}
}
